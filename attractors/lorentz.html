<html>

<head>
    <script src="canvas.js"></script>
    <script src="lorentz.js"></script>
    <script src="drift.js"></script>
    
</head>

<body>
    
    <canvas id="canvas" style="border:1px solid #d3d3d3;"></canvas>
    
    <script>
        
        const w = window.innerWidth;
        const h = window.innerHeight;

        var Morph = new Lorentz();
		const bounds = Morph.bounds;
		const b1 = bounds[0];
		const b2 = bounds[1];
		
        var C = new canvas("canvas", w, h, b1[0], b1[1], b2[0], b2[1]);

        function window_resized(event)
        {
            C.resize(document.body.clientWidth, document.body.clientHeight);
        }
        
        window.onresize = window_resized;

        C.clear([0,0,0], 1.0);
        const NP = Morph.NPoints;
        const Skip = 50;
        var Colors = new ColorChanger();

        function step()
        {
			var points = Morph.init();
            var c = Colors.next_color();
			
            Morph.mutate(); 

            points = Morph.transform(points);
            const projected = Morph.project(points);
            //points = D.f(points);
            //points = D.f(points);
            C.clear([0,0,0], 0.8);
            C.points(projected, c, 0.07);           
        }

        setInterval(step, 1000.0/20);
        
    </script>
</body>
</html>