<html>

<head>
    
    <style type="text/css">

        body {
            padding: 50px;
        }
        
        body, th, td {
            font-family: arial;
            font-size: 12px;
        }
        
        .form th {
            text-align: right;
            color: #888;
        }
        
        .form th, .form td {
            padding: 5px;
        }
        
        #password {
            font-family: monospace;
            font-size: 12px;
            b-order: 1px solid gray;
        }
    </style>
    
</head>

<body>
    <script>
        
        function generate(length, upper, lower, digits, symbols)
        {
            var charset = "";

            if( upper ) charset += "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
            if( lower ) charset += "abcdefghijklmnopqrstuvwxyz";
            if( digits ) charset += "0123456789";
            if( symbols ) charset += "!$%'()+,-./:;=?@^_|~\\";

            var array = new Uint32Array(length);
            window.crypto.getRandomValues(array);
            var password = "";
            for( var i=0; i < array.length; i++ )
                password += charset[array[i] % charset.length];
            
            return password
        }

        function run()
        {
            var len_select = document.getElementById("length")
            var length = parseInt(len_select.options[len_select.selectedIndex].value);
            var upper = document.getElementById("upper").checked;
            var lower = document.getElementById("lower").checked;
            var digits = document.getElementById("digits").checked;
            var symbols = document.getElementById("symbols").checked;
            var password = generate(length, upper, lower, digits, symbols);
            document.getElementById("password").value = password;
        }
        
        var clear_timer = null;
        
        function clear_copied()
        {
            document.getElementById("copied_text").innerHTML = "";
            clear_timer = null;
        }

        function copy_password()
        {
            var password_input = document.getElementById("password");
            password_input.select();
            password_input.setSelectionRange(0, 99999); /* For mobile devices */

             /* Copy the text inside the text field */
            navigator.clipboard.writeText(password_input.value);
            document.getElementById("copied_text").innerHTML = "copied to clipboard";
            if( clear_timer != null )
                window.clearTimeout(clear_timer);
            clear_timer = setTimeout(clear_copied, 2000);
        }
        

    </script>
        
    <h1>Random password generator</h1>
        
    <table class="form">
        <tr>
            <th>Length:</th>
            <td colspan=4><select id="length">
                    <option value="8">8</option>
                    <option value="10">10</option>
                    <option value="12">12</option>
                    <option value="" disabled="disabled">-- strong --</option>
                    <option value="16" selected="selected">16</option>
                    <option value="18">18</option>
                    <option value="20">20</option>
                    <option value="" disabled="disabled">-- very strong --</option>
                    <option value="24">24</option>
                    <option value="32">32</option>
                    <option value="40">40</option>
                </select>
        </tr>
        <tr>
            <th>Include:</th>
            <td width=0px><input type="checkbox" checked="checked" id="upper" width="0px"/></td><td>upper case letters</td>
            <td width=0px><input type="checkbox" checked="checked" id="lower"/></td><td>lower case letters</td>
        </tr>
        <tr>
            <td></td>
            <td width=0px><input type="checkbox" checked="checked" id="digits"/></td><td>digits</td>
            <td width=0px><input type="checkbox" checked="checked" id="symbols"/></td><td>symbols</td>
        </tr>
        <tr>
            <td></td>
            <td colspan=4><button onclick="run()">generate password</button></td>
        </tr>
        <tr>
            <th>Password:</th>
            <td colspan=4><input type=text disabled="disabled" id="password" size=50/></td>
            <td><button onclick="copy_password()">copy password</button></td>
            <td id="copied_text"></td>
        </tr>
    </table>    
    
    <p style="color:gray; position: fixed; bottom:5px">
        Random password generator is only as good as the random number generator it uses to pick random characrets for the password. 
        Many popular random password generators available
        on the internet use basic pseudo-random number generator, which is known not to be good for cryptographic purposes. 
        Unlike many others, this password generator uses cryptographically strong random number generator and therefore 
        produces reliably random, hard to guess passwords.
    </p>
</body>

</html>